

<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">
	 <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title></title>
</head>
<body>
 <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="#">Register</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
         
         
         
        </ul>
        
      </div>
    </nav>
    </body>
    <br>
    <div class="container">
<h3></h3>
<br>
<br/>
<br>

<!-- {% block content %}
<form class='form-signin' id = 'ajaxForm' action="" method="post" data-url='/studentReg' enctype="multipart/form-data" >
    
    {{ form.as_p }}
    <input type="submit" value="submit" />
</form>
{% endblock %} -->

<span id ="error" class=" alert-danger"></span>
<span id="success" class=" alert-success"></span>

<div class="col-lg-12">
                    <section class="panel">
                        <header class="panel-heading">
                            Student Registeration<br/>
                            <span class="tools pull-right">
                                <a class="fa fa-chevron-down" href="javascript:;"></a>
                                <a class="fa fa-cog" href="javascript:;"></a>
                                <a class="fa fa-times" href="javascript:;"></a>
                             </span>
                        </header>
                        <br/>
                        <div class="panel-body">
                            <div class="form">
                                <form class="cmxform form-horizontal " id="signupForm" method="POST" action="" novalidate="novalidate" data-url='/studentReg' enctype='multipart/form-data'>{% csrf_token %}
                                    <div class="form-group ">
                                        <label for="firstname" class="control-label col-lg-3">Firstname</label>
                                        <div class="col-lg-6">
                                            <input class=" form-control" id="first_name" name="first_name" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label for="lastname" class="control-label col-lg-3">Lastname</label>
                                        <div class="col-lg-6">
                                            <input class=" form-control" id="last_name" name="last_name" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label for="username" class="control-label col-lg-3">Username</label>
                                        <div class="col-lg-6">
                                            <input class="form-control " id="username" name="username" type="text">
                                        </div>
                                    </div>
                                     <div class="form-group ">
                                        <label for="mibilenumber" class="control-label col-lg-3">Mobile Number</label>
                                        <div class="col-lg-6">
                                            <input class="form-control " id="phone_number" name="phone_number" type="number">
                                        </div>
                                    </div>
                                     <div class="form-group ">
                                        <label for="location" class="control-label col-lg-3">Location</label>
                                        <div class="col-lg-6">
                                            <input class="form-control " id="location" name="location" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label for="email" class="control-label col-lg-3">Email</label>
                                        <div class="col-lg-6">
                                            <input class="form-control " id="email" name="email" type="email">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                    <label for="exampleInputFile">File input</label>
                                    <input type="file" id="image" name="image">
                                    
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile">File input</label>
                                    <input type="file" id="resume" name="resume">
                                    
                                </div>
                                    <div class="form-group ">
                                        <label for="password" class="control-label col-lg-3">Password</label>
                                        <div class="col-lg-6">
                                            <input class="form-control " id="password1" name="password1" type="password">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label for="confirm_password" class="control-label col-lg-3">Confirm Password</label>
                                        <div class="col-lg-6">
                                            <input class="form-control " id="password" name="password" type="password">
                                        </div>
                                    </div>
                                    
                                 

                                    <div class="form-group">
                                        <div class="col-lg-offset-3 col-lg-6">
                                            <button class="btn btn-primary" value="submit" type="submit">Save</button>
                                            <button class="btn btn-default" value="clear" type="clear">Cancel</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </section>
                </div>




<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"></script>
 <script  type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript">

function getCookie(name) {
          var cookieValue = null;
          if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
               var cookie = jQuery.trim(cookies[i]);
          // Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) == (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
             }
          }
      }
 return cookieValue;
}
var csrftoken = getCookie('csrftoken');
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
});
    
  $(document).ready(function(){
    var $myForm = $("#signupForm")
    $myForm.submit(function(event){
        event.preventDefault()
        console.log("form submitted!")
        var csrftoken = getCookie('csrftoken')
        var $formData = $(this)
        var form = new FormData($(this)[0])

        var formdata ={
            username : $('input[name= username]').val(),
            password : $('input[name = password1]').val(),
            password1 : $('input[name = password]').val(),
            firstname : $('input[name = first_name]').val(),
            lastname : $('input[name = last_name]').val(),
            mobile : $('input[name = phone_number]').val(),
            location :$('input[name= location]').val(),
            email : $('input[name = email]').val(),
            image : $('#image')[0].files[0],
            resume : $('#resume')[0].files[0]

        }
        console.log(formdata)

        console.log($formData)
        

        $.ajax({
            type: "POST",
            url: '/studentReg',
            data: form,
           
            
            success: function(response){
                $myForm[0].reset();
                $('#success').html('Registration Compleated')
            },
            error: function(data, response, err){
                $('#danger').html(data.responseText)
               
               /* var errrors = data.responseText,
                alert(errors),
                console.log(response)*/
               /*  $myForm[0].reset();*/
                /*alert('error')*/
            },
            contentType : false,
            processData : false,

                
          }) 
          
    })

})
</script>



</body>
</html>
